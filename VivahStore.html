
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vivah Store</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', Inter, Arial, sans-serif;
      background: linear-gradient(90deg, #f8bbd0 0%, #fff 80%);
      min-height: 100vh;
      color: #22232A;
    }

    /* Premium Navbar (same style as Matches.html) */
    .navbar {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 34px;
      box-sizing: border-box;
      background: transparent;
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(255, 182, 193, 0.35);
      position: sticky;
      top: 0;
      z-index: 50;
    }
    .navbar-logo {
      font-size: 2.8rem;
      text-shadow: 0 4px 18px rgba(230, 57, 70, 0.18), 0 1px 2px rgba(0,0,0,0.12);
      font-weight: 700;
      color: #e63946;
      letter-spacing: 0.02em;
      cursor: pointer;
      user-select: none;
      font-family: 'Brush Script MT', cursive, 'Poppins', Inter, Arial, sans-serif;
    }

    .navbar-profile {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .navbar-heart {
      position: relative;
    }
    .navbar-heart-btn {
      background: #FFF3F5;
      border: 1.5px solid #f8bbd0;
      color: #c2185b;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: transform 0.18s, box-shadow 0.18s, background 0.18s;
      box-shadow: 0 2px 12px rgba(255, 182, 193, 0.14);
    }
    .navbar-heart-btn:hover {
      transform: translateY(-1px) scale(1.03);
      box-shadow: 0 10px 20px rgba(255, 182, 193, 0.25);
      background: #FFEDEE;
    }
    .navbar-heart-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      min-width: 18px;
      height: 18px;
      border-radius: 999px;
      background: #e63946;
      color: white;
      font-size: 0.72rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0 5px;
      border: 2px solid rgba(255,255,255,0.9);
    }

    .heart-menu {
      position: absolute;
      right: 0;
      margin-top: 10px;
      width: 190px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(255, 182, 193, 0.35);
      border-radius: 14px;
      box-shadow: 0 18px 40px rgba(50, 50, 50, 0.12);
      padding: 10px;
      display: none;
    }
    .navbar-heart.open .heart-menu {
      display: block;
    }
    .heart-like-row {
      width: 100%;
      border: none;
      border-radius: 12px;
      background: #FFF3F5;
      color: #c2185b;
      cursor: pointer;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: inherit;
      font-weight: 600;
    }

    .dropdown {
      position: relative;
    }
    .dropdown-toggle {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0;
      border-radius: 999px;
    }

    .navbar-profile-avatar {
      width: 56px;
      height: 56px;
      border-radius: 999px;
      background: #FFF3F5;
      border: 1.5px solid #f8bbd0;
      display: grid;
      place-items: center;
      color: #c2185b;
      font-weight: 700;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(255, 182, 193, 0.14);
      transition: transform 0.18s, box-shadow 0.18s;
    }
    .navbar-profile-avatar:hover {
      transform: translateY(-1px) scale(1.03);
      box-shadow: 0 10px 20px rgba(255, 182, 193, 0.25);
    }
    .navbar-profile-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }
    .navbar-profile-avatar.has-photo img {
      display: block;
    }
    .navbar-profile-avatar.has-photo span {
      display: none;
    }

    .dropdown-menu {
      position: absolute;
      right: 0;
      top: 56px;
      width: 260px;
      background: rgba(255, 255, 255, 0.96);
      border: 1px solid rgba(255, 182, 193, 0.35);
      border-radius: 16px;
      box-shadow: 0 18px 40px rgba(50, 50, 50, 0.12);
      padding: 12px;
      display: none;
    }
    .dropdown.open .dropdown-menu {
      display: block;
    }

    .dropdown-user {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      border-radius: 14px;
      background: #FFF3F5;
      border: 1px solid rgba(255, 182, 193, 0.35);
    }
    .dropdown-user-avatar {
      width: 44px;
      height: 44px;
      border-radius: 999px;
      object-fit: cover;
      display: none;
    }
    .dropdown-user-avatar.show {
      display: block;
    }
    .dropdown-user-fallback {
      width: 44px;
      height: 44px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      font-weight: 700;
      color: #c2185b;
      background: #FFEDEE;
      border: 1px solid rgba(255, 182, 193, 0.35);
    }
    .dropdown-user-name {
      font-weight: 700;
      color: #62182b;
      line-height: 1.2;
    }
    .dropdown-user-handle {
      color: #ad1457;
      font-size: 0.9rem;
    }

    .dropdown-divider {
      height: 1px;
      background: rgba(255, 182, 193, 0.35);
      margin: 12px 4px;
    }

    .dropdown-menu-item {
      width: 100%;
      border: none;
      background: transparent;
      cursor: pointer;
      text-align: left;
      padding: 12px 12px;
      border-radius: 12px;
      font-family: inherit;
      font-weight: 600;
      color: #62182b;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background 0.18s;
    }
    .dropdown-menu-item:hover {
      background: #FFEDEE;
    }

    /* Main container */
    .container {
      max-width: 1280px;
      margin: 64px auto 0 auto;
      padding: 0 20px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .page-title {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .page-title h1 {
      margin: 0;
      font-size: 1.55rem;
      font-weight: 800;
      color: #62182b;
      letter-spacing: 0.01em;
    }

    .page-title p {
      margin: 0;
      font-size: 1.02rem;
      font-weight: 500;
      color: #ad1457;
    }

    /* Card grid (same as Matches) */
    .matches-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 32px;
      justify-content: center;
      align-items: stretch;
      margin-top: 0;
    }

    /* Card styles (same as Matches) */
    .card {
      background: #FAF7F6;
      border-radius: 20px;
      box-shadow: 0 4px 24px 0 rgba(255, 182, 193, 0.13), 0 1.5px 6px 0 rgba(255, 182, 193, 0.07);
      padding: 36px 28px 28px 28px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 22px;
      min-height: 390px;
      border: 1.5px solid #FFEDEE;
      transition: box-shadow 0.22s, transform 0.22s, border 0.18s;
      position: relative;
      margin-bottom: 8px;
    }
    .card:hover {
      box-shadow: 0 12px 40px 0 rgba(50, 50, 50, 0.18), 0 2px 16px 0 rgba(255, 182, 193, 0.13);
      transform: translateY(-8px) scale(1.025);
      border: 1.5px solid #f8bbd0;
    }
    .card-head {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      width: 100%;
    }
    .avatar {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid #FFEDEE;
      box-shadow: 0 2px 12px rgba(255, 182, 193, 0.13);
      background: #FFF3F5;
      margin-bottom: 10px;
    }
    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }
    .name {
      font-weight: 700;
      font-size: 1.22rem;
      color: #62182b;
      letter-spacing: 0.01em;
      text-align: center;
    }
    .meta {
      color: #c2185b;
      font-size: 1.02rem;
      font-weight: 600;
      margin-left: 6px;
    }
    .location {
      font-size: 0.98rem;
      color: #ad1457;
      margin-top: 2px;
      text-align: center;
    }
    .profession {
      font-weight: 600;
      color: #c2185b;
      font-size: 1.01rem;
      text-align: center;
    }
    .bio {
      color: #33343A;
      font-size: 1.04rem;
      line-height: 1.7;
      margin-top: 10px;
      text-align: center;
      min-height: 48px;
      letter-spacing: 0.01em;
    }
    .actions {
      display: flex;
      gap: 18px;
      margin-top: 18px;
      width: 100%;
      justify-content: stretch;
    }

    .actions .btn {
      flex: 1;
      min-width: 0;
    }

    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 28px;
      border-radius: 999px;
      font-family: 'Poppins', Inter, Arial, sans-serif;
      font-weight: 500;
      font-size: 1.05rem;
      cursor: pointer;
      outline: none;
      transition: background 0.22s, color 0.22s, box-shadow 0.22s, transform 0.22s;
      box-shadow: 0 2px 12px rgba(255, 182, 193, 0.10);
      border: none;
      position: relative;
      overflow: hidden;
      min-width: 120px;
    }

    /* Reuse Matches button palettes */
    .btn-cart {
      display: none;
      background: #FFF3F5;
      color: #c2185b;
      border: 1.5px solid #f8bbd0;
      box-shadow: 0 2px 12px #ffe5ec80;
    }
    .btn-cart:hover {
      background: #FFEDEE;
      color: #e63946;
      box-shadow: 0 8px 24px #ffe5ecb0;
      transform: scale(1.06);
    }

    .btn-buy {
      background: #FFF3F5;
      color: #c2185b;
      border: 1.5px solid #f8bbd0;
      box-shadow: 0 2px 12px #ffe5ec80;
      padding: 14px 28px;
      font-size: 1.12rem;
    }
    .btn-buy:hover {
      background: #FFEDEE;
      color: #e63946;
      box-shadow: 0 8px 24px #ffe5ecb0;
      transform: scale(1.06);
    }

    .btn:active::after {
      content: '';
      position: absolute;
      left: 50%;
      top: 50%;
      width: 120%;
      height: 120%;
      background: rgba(255, 182, 193, 0.13);
      border-radius: 999px;
      transform: translate(-50%, -50%) scale(0);
      animation: ripple 0.5s;
      z-index: 1;
    }
    @keyframes ripple {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0.6; }
      80% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.2; }
      100% { transform: translate(-50%, -50%) scale(1.2); opacity: 0; }
    }
    .btn span {
      position: relative;
      z-index: 2;
    }

    /* Responsive adjustments */
    @media (max-width: 900px) {
      .container { padding: 0 8px; }
      .matches-grid { gap: 18px; }
      .card { padding: 18px 8px 16px 8px; }
      .actions { gap: 12px; }
      .btn { padding: 12px 18px; }
    }
    @media (max-width: 600px) {
      .navbar { flex-direction: column; gap: 10px; padding: 12px 6px; }
      .container { margin-top: 16px; gap: 16px; }
      .matches-grid { gap: 10px; }
      .card { min-height: 320px; }
      .avatar { width: 68px; height: 68px; }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-logo" id="navbarLogo">Vivah</div>

    <div class="navbar-profile">
      <div class="navbar-heart" id="navbarOrders">
        <button class="navbar-heart-btn" id="navbarOrdersBtn" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Order history">
          <i class="fa-solid fa-clock-rotate-left" aria-hidden="true"></i>
        </button>
        <span class="navbar-heart-badge" id="navbarOrdersBadge" style="display:none;">1</span>
      </div>

      <div class="dropdown" id="profileDropdown">
        <button class="dropdown-toggle" id="dropdownToggle" aria-haspopup="true" aria-expanded="false" aria-label="Open profile menu">
          <div class="navbar-profile-avatar" id="navbarProfileAvatar" aria-hidden="true">
            <img id="navbarProfileImg" alt="" />
            <span id="navbarProfileText">U</span>
          </div>
        </button>
        <div class="dropdown-menu" id="dropdownMenu" aria-labelledby="dropdownToggle">
          <div class="dropdown-user" id="menuUser" role="presentation">
            <img class="dropdown-user-avatar" id="menuUserAvatar" alt="Your profile photo" />
            <div class="dropdown-user-fallback" id="menuUserFallback" aria-hidden="true">U</div>
            <div>
              <div class="dropdown-user-name" id="menuDisplayName">User</div>
              <div class="dropdown-user-handle" id="menuHandle">@user</div>
            </div>
          </div>

          <div class="dropdown-divider" role="presentation"></div>

          <button class="dropdown-menu-item" id="menuMyProfile"><i class="fa fa-user"></i> Profile</button>
          <button class="dropdown-menu-item" id="menuMatch"><i class="fa-solid fa-heart" aria-hidden="true"></i> Match</button>
          <button class="dropdown-menu-item" id="menuChat"><i class="fa-solid fa-comments"></i> Chats</button>
          <button class="dropdown-menu-item" id="menuStore"><i class="fa-solid fa-bag-shopping"></i> Vivah Store</button>
          <button class="dropdown-menu-item" id="menuVenue"><i class="fa-solid fa-building-columns"></i> Venue Selection</button>
          <button class="dropdown-menu-item" id="menuHelp"><i class="fa fa-circle-question"></i> Help &amp; Support</button>
          <button class="dropdown-menu-item" id="menuLogout"><i class="fa fa-arrow-right-from-bracket"></i> Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <main class="container">
    <div class="page-title">
      <div>
        <h1>Vivah Store</h1>
        <p>Marriage outfits &amp; accessories</p>
      </div>
    </div>

    <section class="matches-grid" aria-label="Store products">
      <article class="card" data-id="sherwani" data-name="Royal Sherwani" data-price="3499">
        <div class="card-head">
            <div class="avatar"><img src="shopping/Royal Sherwani.webp" alt="Royal Sherwani (zoomed out)"></div>
          <div>
            <div class="name">Royal Sherwani <span class="meta">• ₹3,499</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Groom Wear</div>
          </div>
        </div>
        <p class="bio">Elegant sherwani for your wedding day look.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="lehenga" data-name="Bridal Lehenga" data-price="5999">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Bridal Lehenga.jpg" alt="Bridal Lehenga"></div>
          <div>
            <!-- Zoom Modal for Bridal Lehenga -->
            <div id="lehengaZoomModal" style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;">
              <span id="lehengaZoomClose" style="position:absolute;top:30px;right:50px;font-size:2.5rem;color:#fff;cursor:pointer;font-weight:bold;z-index:10001;">&times;</span>
              <img src="shopping/Bridal Lehenga.jpg" alt="Bridal Lehenga Zoomed" style="max-width:80vw;max-height:80vh;border-radius:18px;box-shadow:0 8px 40px #0007;display:block;">
            </div>
            <div class="name">Bridal Lehenga <span class="meta">• ₹5,999</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Bridal Wear</div>
          </div>
        </div>
        <p class="bio">Classic bridal lehenga with premium finish.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="saree" data-name="Kanjivaram Saree" data-price="4299">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Kanjivaram Saree.jpg" alt="Kanjivaram Saree"></div>
          <div>
            <div style="font-size:1.1rem;font-weight:600;color:#b71c1c;text-align:center;margin-bottom:4px;">Kanjivaram Saree</div>
            <div class="name">Kanjivaram Saree <span class="meta">• ₹4,299</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Wedding Saree</div>
          </div>
        </div>
        <p class="bio">Traditional saree for wedding &amp; reception.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="tuxedo" data-name="Reception Tuxedo" data-price="4999">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Reception Tuxedo.jpeg" alt="Reception Tuxedo"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#1a237e;text-align:center;margin-bottom:4px;">Reception Tuxedo</div>
          <div>
            <div class="name">Reception Tuxedo <span class="meta">• ₹4,999</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Reception Wear</div>
          </div>
        </div>
        <p class="bio">Sharp tuxedo look for a classy reception.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="jewelry" data-name="Bridal Jewelry Set" data-price="2799">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Bridal Jewelry Set.jpeg" alt="Bridal Jewelry Set"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#b71c1c;text-align:center;margin-bottom:4px;">Bridal Jewelry Set</div>
            <div class="name">Bridal Jewelry Set <span class="meta">• ₹2,799</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Accessories</div>
          </div>
        </div>
        <p class="bio">Complete set for bridal styling and glow.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="footwear" data-name="Wedding Footwear" data-price="1499">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Wedding Footwear.jpeg" alt="Wedding Footwear"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#4e342e;text-align:center;margin-bottom:4px;">Wedding Footwear</div>
            <div class="name">Wedding Footwear <span class="meta">• ₹1,499</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Footwear</div>
          </div>
        </div>
        <p class="bio">Comfortable footwear for long wedding events.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="kurta" data-name="Designer Kurta Set" data-price="2499">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Designer Kurta Set.webp" alt="Designer Kurta Set"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#1b5e20;text-align:center;margin-bottom:4px;">Designer Kurta Set</div>
            <div class="name">Designer Kurta Set <span class="meta">• ₹2,499</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Groom Wear</div>
          </div>
        </div>
        <p class="bio">Perfect for engagement and pre-wedding events.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="dupatta" data-name="Bridal Dupatta" data-price="899">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Bridal Dupatta.jpeg" alt="Bridal Dupatta"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#ad1457;text-align:center;margin-bottom:4px;">Bridal Dupatta</div>
          <div>
            <div class="name">Bridal Dupatta <span class="meta">• ₹899</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Bridal Wear</div>
          </div>
        </div>
        <p class="bio">Lightweight dupatta to complete the bridal look.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="safa" data-name="Groom Safa (Turban)" data-price="699">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Groom Safa (Turban).jpeg" alt="Groom Safa (Turban)"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#ad1457;text-align:center;margin-bottom:4px;">Groom Safa (Turban)</div>
          <div>
            <div class="name">Groom Safa (Turban) <span class="meta">• ₹699</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Accessories</div>
          </div>
        </div>
        <p class="bio">Traditional safa with a premium ready-to-wear fit.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="bangles" data-name="Mehendi Bangles Set" data-price="1299">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Mehendi Bangles Set.jpeg" alt="Mehendi Bangles Set"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#b71c1c;text-align:center;margin-bottom:4px;">Mehendi Bangles Set</div>
          <div>
            <div class="name">Mehendi Bangles Set <span class="meta">• ₹1,299</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Accessories</div>
          </div>
        </div>
        <p class="bio">Trendy bangles for mehendi and sangeet functions.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="gown" data-name="Reception Gown" data-price="5499">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Reception Gown.jpeg" alt="Reception Gown"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#6a1b9a;text-align:center;margin-bottom:4px;">Reception Gown</div>
          <div>
            <div class="name">Reception Gown <span class="meta">• ₹5,499</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Reception Wear</div>
          </div>
        </div>
        <p class="bio">Stylish gown for a modern reception entrance.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>

      <article class="card" data-id="stole" data-name="Embroidered Stole" data-price="999">
        <div class="card-head">
          <div class="avatar"><img src="shopping/Embroidered Stole.webp" alt="Embroidered Stole"></div>
          <div style="font-size:1.1rem;font-weight:600;color:#4e342e;text-align:center;margin-bottom:4px;">Embroidered Stole</div>
          <div>
            <div class="name">Embroidered Stole <span class="meta">• ₹999</span></div>
            <div class="location">Free delivery</div>
            <div class="profession">Accessories</div>
          </div>
        </div>
        <p class="bio">Elegant stole to elevate sherwani or kurta styling.</p>
        <div class="actions">
          <button class="btn btn-cart" type="button" data-action="cart"><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i><span>Cart</span></button>
          <button class="btn btn-buy" type="button" data-action="buy"><i class="fa-solid fa-bag-shopping" aria-hidden="true"></i><span>Buy</span></button>
        </div>
      </article>
    </section>
  </main>

  <script type="module">
    import { auth, database } from "./firebase-config.js";
    import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
    import { ref, get, push, set, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";
    import { RAZORPAY_KEY_ID, loadRazorpayScript } from "./razorpay-config.js";

    // Dropdown open/close logic with outside click (copied pattern from Matches.html)
    const dropdown = document.getElementById('profileDropdown');
    const toggle = document.getElementById('dropdownToggle');
    const menu = document.getElementById('dropdownMenu');
    const myProfileBtn = document.getElementById('menuMyProfile');
    const menuMatch = document.getElementById('menuMatch');
    const menuChat = document.getElementById('menuChat');
    const menuStore = document.getElementById('menuStore');
    const menuVenue = document.getElementById('menuVenue');
    const menuHelp = document.getElementById('menuHelp');
    const menuLogout = document.getElementById('menuLogout');
    const navbarProfileAvatar = document.getElementById('navbarProfileAvatar');
    const navbarProfileText = document.getElementById('navbarProfileText');
    const navbarProfileImg = document.getElementById('navbarProfileImg');
    const menuUserAvatar = document.getElementById('menuUserAvatar');
    const menuUserFallback = document.getElementById('menuUserFallback');
    const menuDisplayName = document.getElementById('menuDisplayName');
    const menuHandle = document.getElementById('menuHandle');
    const navbarOrders = document.getElementById('navbarOrders');
    const navbarOrdersBtn = document.getElementById('navbarOrdersBtn');
    const navbarOrdersBadge = document.getElementById('navbarOrdersBadge');
    let currentUid = '';

    function setOrdersBadge(count) {
      if (!navbarOrdersBadge) return;
      const n = Number(count) || 0;
      if (n > 0) {
        navbarOrdersBadge.style.display = 'inline-flex';
        navbarOrdersBadge.textContent = String(Math.min(n, 99));
        navbarOrdersBadge.setAttribute('aria-label', `${n} order${n === 1 ? '' : 's'}`);
      } else {
        navbarOrdersBadge.style.display = 'none';
        navbarOrdersBadge.textContent = '';
      }
    }

    async function fetchOrdersForUid(uid) {
      if (!uid) return [];
      const snap = await get(ref(database, `Store purchase/${uid}`));
      if (!snap.exists()) return [];
      const val = snap.val() || {};
      const items = Object.entries(val)
        .map(([key, order]) => ({ key, ...(order || {}) }))
        .filter((x) => x && typeof x === 'object');
      items.sort((a, b) => {
        const ta = Date.parse(String(a?.createdAt || '')) || 0;
        const tb = Date.parse(String(b?.createdAt || '')) || 0;
        return tb - ta;
      });
      return items;
    }

    async function refreshOrders() {
      try {
        const items = await fetchOrdersForUid(currentUid);
        setOrdersBadge(items.length);
      } catch (e) {
        console.warn('Order history load failed:', e);
        setOrdersBadge(0);
      }
    }

    function normalizeUsername(value) {
      return (value || '').toString().trim().replace(/^@+/, '');
    }

    function getFirebaseUser() {
      try {
        return JSON.parse(localStorage.getItem('firebaseUser') || 'null');
      } catch {
        return null;
      }
    }

    function getHandleForUi() {
      const stored = normalizeUsername(localStorage.getItem('vivah_username'));
      if (stored) return `@${stored}`;

      const fb = getFirebaseUser();
      const email = (fb?.email || '').trim();
      if (email && email.includes('@')) return `@${email.split('@')[0]}`;

      return '@user';
    }

    function getDisplayNameForUi(handleWithAt) {
      const lsName = (localStorage.getItem('vivah_name') || '').trim();
      if (lsName) return lsName;

      const fb = getFirebaseUser();
      const name = (fb?.displayName || '').trim();
      if (name) return name;

      const base = normalizeUsername(handleWithAt);
      return base || 'User';
    }

    function getInitials(text) {
      const cleaned = (text || '').toString().trim();
      if (!cleaned) return 'U';
      const parts = cleaned.split(/\s+/).filter(Boolean);
      if (parts.length === 1) return parts[0].slice(0, 2).toUpperCase();
      return (parts[0][0] + parts[1][0]).toUpperCase();
    }

    function applyProfileUi() {
      const handle = getHandleForUi();
      const displayName = getDisplayNameForUi(handle);
      const initials = getInitials(displayName);

      if (menuHandle) menuHandle.textContent = handle;
      if (menuDisplayName) menuDisplayName.textContent = displayName;
      if (navbarProfileText) navbarProfileText.textContent = initials;
      if (menuUserFallback) menuUserFallback.textContent = initials;

      const dpUrl = localStorage.getItem('dpUrl');
      if (dpUrl && navbarProfileAvatar && navbarProfileImg) {
        navbarProfileImg.src = dpUrl;
        navbarProfileAvatar.classList.add('has-photo');
      }

      if (dpUrl && menuUserAvatar) {
        menuUserAvatar.src = dpUrl;
        menuUserAvatar.classList.add('show');
        if (menuUserFallback) menuUserFallback.style.display = 'none';
      }
    }

    async function fetchEditProfileFromFirebase(uid) {
      try {
        const snap = await get(ref(database, 'editprofile/' + uid));
        if (!snap.exists()) return;
        const data = snap.val() || {};
        if (typeof data.name === 'string') localStorage.setItem('vivah_name', data.name);
        if (typeof data.username === 'string') localStorage.setItem('vivah_username', String(data.username).replace(/^@+/, ''));
      } catch (e) {
        console.error(e);
      } finally {
        applyProfileUi();
      }
    }

    applyProfileUi();
    onAuthStateChanged(auth, (user) => {
      currentUid = user?.uid ? String(user.uid) : '';
      if (user?.uid) fetchEditProfileFromFirebase(user.uid);
      refreshOrders();
    });

    window.addEventListener('storage', (e) => {
      if (e.key === 'vivah_name' || e.key === 'vivah_username' || e.key === 'dpUrl') {
        applyProfileUi();
      }
    });

    if (navbarOrdersBtn) {
      navbarOrdersBtn.addEventListener('click', function() {
        window.location.href = 'PurchaseHistory.html';
      });
    }

    if (dropdown && toggle && menu) {
      toggle.addEventListener('click', function(e) {
        e.stopPropagation();
        dropdown.classList.toggle('open');
        toggle.setAttribute('aria-expanded', dropdown.classList.contains('open'));
      });
      document.addEventListener('click', function(e) {
        if (!dropdown.contains(e.target)) {
          dropdown.classList.remove('open');
          toggle.setAttribute('aria-expanded', 'false');
        }
      });
      toggle.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          dropdown.classList.remove('open');
          toggle.setAttribute('aria-expanded', 'false');
        }
      });

      if (myProfileBtn) {
        myProfileBtn.addEventListener('click', function() {
          window.location.href = 'Account.html';
        });
      }

      function getMatchTargetPage() {
        const pref = (localStorage.getItem('partnerPreference') || '').toString().trim().toLowerCase();
        return pref === 'female' ? 'MatchesFemale.html' : 'Matches.html';
      }

      if (menuMatch) {
        menuMatch.addEventListener('click', function() {
          window.location.href = getMatchTargetPage();
        });
      }

      if (menuLogout) {
        menuLogout.addEventListener('click', async function() {
          try { await signOut(auth); } catch {}

          localStorage.removeItem('firebaseUser');
          localStorage.removeItem('authProvider');

          try {
            const keys = [];
            for (let i = 0; i < localStorage.length; i++) {
              const k = localStorage.key(i);
              if (k) keys.push(k);
            }
            keys
              .filter((k) => /^sb-.*-auth-token$/.test(k))
              .forEach((k) => localStorage.removeItem(k));
          } catch {}

          window.location.href = 'index.html';
        });
      }

      if (menuChat) {
        menuChat.addEventListener('click', function() {
          const qs = new URLSearchParams({ to: 'example-aanyasharma' });
          window.location.href = `Chat.html?${qs.toString()}`;
        });
      }

      if (menuStore) {
        menuStore.addEventListener('click', function() {
          window.location.href = 'VivahStore.html';
        });
      }

      if (menuVenue) {
        menuVenue.addEventListener('click', function() {
          window.location.href = 'VenueSelection.html';
        });
      }

      if (menuHelp) {
        menuHelp.addEventListener('click', function() {
          alert('Help & Support coming soon');
        });
      }
    }

    function escapeHtml(value) {
      return String(value || '')
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;');
    }

    function getItemFromCard(card) {
      const id = card?.dataset?.id || '';
      const name = card?.dataset?.name || '';
      const price = Number(card?.dataset?.price || 0);
      const img = card?.querySelector('img')?.getAttribute('src') || '';
      return { id, name, price, img };
    }

    function flashButton(button, text) {
      if (!button) return;
      const span = button.querySelector('span');
      const prev = span ? span.textContent : '';
      if (span) span.textContent = text;
      button.disabled = true;
      window.setTimeout(() => {
        if (span) span.textContent = prev;
        button.disabled = false;
      }, 850);
    }

    async function saveStorePurchaseToFirebaseRTDB({ uid, item, amount, currency, prefill, razorpay }) {
      if (!uid) return;

      const record = {
        uid: String(uid),
        item: {
          id: String(item?.id || ''),
          name: String(item?.name || ''),
          price: Number(item?.price || 0),
          img: String(item?.img || ''),
        },
        amount: Number(amount) || 0,
        currency: String(currency || 'INR'),
        customer: {
          name: (prefill?.name || '').toString().trim() || null,
          email: (prefill?.email || '').toString().trim() || null,
          phone: (prefill?.contact || '').toString().trim() || null,
        },
        razorpay: {
          paymentId: String(razorpay?.paymentId || ''),
          orderId: String(razorpay?.orderId || ''),
          signature: String(razorpay?.signature || ''),
        },
        status: 'success',
        page: (typeof location !== 'undefined' ? location.href : ''),
        createdAt: new Date().toISOString(),
        createdAtServer: serverTimestamp(),
      };

      const paymentId = record.razorpay.paymentId;
      const safeKey = /^[A-Za-z0-9_-]+$/.test(paymentId || '') ? paymentId : '';
      const perUserBase = ref(database, `Store purchase/${uid}`);
      const perUserRef = safeKey ? ref(database, `Store purchase/${uid}/${safeKey}`) : push(perUserBase);
      await set(perUserRef, record);
    }

    function getCustomerPrefillForRazorpay() {
      const fb = getFirebaseUser();
      const name = (localStorage.getItem('vivah_name') || fb?.displayName || '').toString().trim();
      const email = (fb?.email || '').toString().trim();
      const phone = (localStorage.getItem('vivah_phone') || fb?.phoneNumber || '').toString().trim();
      return { name, email, contact: phone };
    }

    async function startStorePurchase(item, button) {
      if (!item?.id || !item?.name || !Number(item?.price)) {
        alert('Invalid item');
        return;
      }

      if (!auth?.currentUser?.uid) {
        alert('Please login to purchase');
        window.location.href = 'login.html';
        return;
      }

      const uid = String(auth.currentUser.uid);
      const prefill = getCustomerPrefillForRazorpay();

      try {
        if (button) flashButton(button, 'Opening...');
        if (!window.Razorpay) await loadRazorpayScript();
        if (!window.Razorpay) throw new Error('Razorpay SDK not available');

        const options = {
          key: RAZORPAY_KEY_ID,
          amount: Math.round(Number(item.price) * 100),
          currency: 'INR',
          name: 'Vivah Store',
          description: String(item.name),
          notes: {
            itemId: String(item.id),
            itemName: String(item.name),
            itemPrice: String(item.price),
          },
          prefill: {
            name: prefill.name,
            email: prefill.email,
            contact: prefill.contact,
          },
          theme: { color: '#E34450' },
          handler: function (response) {
            (async () => {
              await saveStorePurchaseToFirebaseRTDB({
                uid,
                item,
                amount: Number(item.price) || 0,
                currency: 'INR',
                prefill: options.prefill,
                razorpay: {
                  paymentId: response?.razorpay_payment_id || '',
                  orderId: response?.razorpay_order_id || '',
                  signature: response?.razorpay_signature || '',
                },
              });
              await refreshOrders();
            })()
              .catch((e) => console.warn('Store purchase save failed:', e))
              .finally(() => {
                alert('Purchase successful! Payment ID: ' + (response?.razorpay_payment_id || ''));
              });
          },
          modal: {
            ondismiss: function () {
              // user closed
            }
          }
        };

        const rzp = new window.Razorpay(options);
        rzp.open();
      } catch (e) {
        console.warn(e);
        alert('Payment failed to start');
      }
    }

    function wireStoreCards() {
      const cards = Array.from(document.querySelectorAll('.matches-grid .card'));
      cards.forEach((card) => {
        const buyBtn = card.querySelector('[data-action="buy"]');
        if (!buyBtn) return;
        buyBtn.addEventListener('click', () => {
          const item = getItemFromCard(card);
          startStorePurchase(item, buyBtn);
        });
      });
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', wireStoreCards);
    } else {
      wireStoreCards();
    }

    const navbarLogo = document.getElementById('navbarLogo');
    if (navbarLogo) {
      navbarLogo.addEventListener('click', () => {
        window.location.href = 'index.html';
      });
    }
  </script>
  <script>
    // Bridal Lehenga Zoom Feature
    document.addEventListener('DOMContentLoaded', function() {
      const lehengaImg = document.querySelector('.card[data-id="lehenga"] .avatar img');
      const modal = document.getElementById('lehengaZoomModal');
      const closeBtn = document.getElementById('lehengaZoomClose');
      if (lehengaImg && modal && closeBtn) {
        lehengaImg.style.cursor = 'zoom-in';
        lehengaImg.addEventListener('click', function() {
          modal.style.display = 'flex';
        });
        closeBtn.addEventListener('click', function() {
          modal.style.display = 'none';
        });
        modal.addEventListener('click', function(e) {
          if (e.target === modal) modal.style.display = 'none';
        });
      }
    });
  </script>
</body>
</html>
