<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Venue Details</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="booking-integration.js"></script>

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', Inter, Arial, sans-serif;
      background: linear-gradient(135deg, #ffe5ec 0%, #fff1f7 40%, #f7f7ff 100%);
      min-height: 100vh;
      color: #22232A;
    }

    .navbar {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 34px;
      box-sizing: border-box;
      background: rgba(255, 255, 255, 0.82);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(255, 182, 193, 0.35);
      position: sticky;
      top: 0;
      z-index: 50;
    }

    .navbar-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .navbar-logo {
      font-size: 1.55rem;
      font-weight: 700;
      color: #e63946;
      letter-spacing: 0.02em;
      cursor: pointer;
      user-select: none;
    }

    .nav-btn {
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(255, 182, 193, 0.55);
      color: #62182b;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: transform 0.18s, box-shadow 0.18s;
      box-shadow: 0 2px 12px rgba(255, 182, 193, 0.14);
    }

    .nav-btn:hover {
      transform: translateY(-1px) scale(1.03);
      box-shadow: 0 10px 20px rgba(255, 182, 193, 0.25);
    }

    .container {
      max-width: 1100px;
      margin: 64px auto 0 auto;
      padding: 0 20px 70px 20px;
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 22px;
    }

    @media (max-width: 900px) {
      .container { grid-template-columns: 1fr; }
    }

    .card {
      background: rgba(255, 255, 255, 0.86);
      border: 1px solid rgba(255, 182, 193, 0.35);
      border-radius: 18px;
      box-shadow: 0 18px 40px rgba(50, 50, 50, 0.10);
      overflow: hidden;
    }

    .pad { padding: 18px; }

    .media {
      width: 100%;
      aspect-ratio: 16 / 9;
      background: #fff;
      border-bottom: 1px solid rgba(255, 182, 193, 0.35);
      overflow: hidden;
    }

    .media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    h1 {
      margin: 0;
      font-size: 1.75rem;
      font-weight: 900;
      color: #62182b;
    }

    .sub {
      margin: 8px 0 0 0;
      color: rgba(34, 35, 42, 0.72);
      font-weight: 500;
    }

    .meta {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    .pill {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      padding: 8px 12px;
      border-radius: 999px;
      background: #FFF3F5;
      border: 1px solid rgba(255, 182, 193, 0.40);
      color: rgba(34, 35, 42, 0.76);
      font-weight: 700;
    }

    .pill i { color: #e63946; }

    .grid2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 14px;
    }

    @media (max-width: 520px) {
      .grid2 { grid-template-columns: 1fr; }
    }

    .infoBox {
      padding: 12px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 182, 193, 0.35);
    }

    .label {
      font-size: 0.85rem;
      font-weight: 800;
      color: #62182b;
      margin-bottom: 4px;
    }

    .value {
      font-weight: 800;
      color: rgba(34, 35, 42, 0.82);
    }

    .cta {
      display: grid;
      gap: 10px;
    }

    .btn {
      border: none;
      border-radius: 12px;
      padding: 12px 14px;
      font-weight: 800;
      font-family: inherit;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .btn-primary {
      background: linear-gradient(90deg, #ff758c, #e83a4f);
      color: #fff;
      box-shadow: 0 12px 25px rgba(227, 68, 80, 0.18);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(255, 182, 193, 0.55);
      color: #62182b;
    }

    .note {
      margin: 0;
      color: rgba(34, 35, 42, 0.65);
      font-weight: 500;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .empty {
      text-align: center;
      padding: 26px 18px;
      color: rgba(34, 35, 42, 0.7);
      font-weight: 700;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-left">
      <button class="nav-btn" type="button" id="backBtn" aria-label="Back">
        <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
      </button>
      <div class="navbar-logo" id="navbarLogo">Vivah</div>
    </div>
    <button class="nav-btn" type="button" id="myBookingsBtn" aria-label="My bookings">
      <i class="fa-solid fa-calendar-check" aria-hidden="true"></i>
    </button>
  </nav>

  <main class="container">
    <section class="card" id="venueCard" style="display:none;">
      <div class="media"><img id="venueImg" alt="Venue" /></div>
      <div class="pad">
        <h1 id="venueName">Venue</h1>
        <p class="sub" id="venueSub"></p>
        <div class="meta" id="venueMeta"></div>

        <div class="grid2" id="venueInfo"></div>

        <div style="height: 14px;"></div>
        <p class="note" id="venueDesc"></p>
      </div>
    </section>

    <aside class="card" id="bookingCard" style="display:none;">
      <div class="pad">
        <h2 style="margin:0;font-size:1.1rem;color:#62182b;">Book this venue</h2>
        <p class="note" style="margin-top:8px;">Pay a booking token to confirm your booking request.</p>
        <div style="height: 12px;"></div>
        <div class="infoBox">
          <div class="label">Booking date</div>
          <div class="value" style="font-weight:700;">
            <input id="bookingDate" type="date" style="width:100%;border:1px solid rgba(255, 182, 193, 0.55);background:rgba(255,255,255,0.9);border-radius:12px;padding:10px 12px;font-family:inherit;font-weight:700;color:#62182b;" />
          </div>
        </div>
        <div style="height: 10px;"></div>
        <div class="infoBox">
          <div class="label">Booking token</div>
          <div class="value" id="bookingAmount">₹499</div>
        </div>
        <div style="height: 12px;"></div>
        <div class="cta">
          <button class="btn btn-primary" type="button" id="payBookBtn"><i class="fa-solid fa-bolt" aria-hidden="true"></i><span>Pay & Book</span></button>
          <button class="btn btn-secondary" type="button" id="viewBookingsBtn"><i class="fa-solid fa-receipt" aria-hidden="true"></i><span>View My Bookings</span></button>
        </div>
        <div style="height: 12px;"></div>
        <p class="note">Your booking will appear under My Bookings after payment.</p>
      </div>
    </aside>

    <section class="card" id="emptyCard" style="display:none;">
      <div class="empty">
        Venue not found.
      </div>
    </section>
  </main>

  <script>
    const VENUES = {
      grandhall: {
        id: 'grandhall',
        name: 'Grand Wedding Hall',
        city: 'Mumbai',
        rating: '4.8',
        type: 'Banquet Hall',
        address: 'Grand Wedding Hall, Andheri East, Mumbai, Maharashtra',
        phone: '+91 90000 10001',
        image: 'images/sem6matrimonialimg.png',
        desc: 'Spacious indoor venue with stage and dining. Ideal for premium functions with large guest lists.'
      },
      garden: {
        id: 'garden',
        name: 'Royal Garden Lawns',
        city: 'Pune',
        rating: '4.7',
        type: 'Garden Venue',
        address: 'Royal Garden Lawns, Baner, Pune, Maharashtra',
        phone: '+91 90000 10002',
        image: 'images/littleheart5.jpg',
        desc: 'Open-air lawns for a beautiful evening wedding with a scenic setup.'
      },
      resort: {
        id: 'resort',
        name: 'Lakeview Resort',
        city: 'Udaipur',
        rating: '4.9',
        type: 'Resort Venue',
        address: 'Lakeview Resort, Fateh Sagar Lake Road, Udaipur, Rajasthan',
        phone: '+91 90000 10003',
        image: 'images/littleheart4.jpg',
        desc: 'Luxury resort venue for destination weddings with premium hospitality.'
      },
      beach: {
        id: 'beach',
        name: 'Seaside Mandap',
        city: 'Goa',
        rating: '4.6',
        type: 'Beach Venue',
        address: 'Seaside Mandap, Baga Beach Road, Goa',
        phone: '+91 90000 10004',
        image: 'images/littleheart3.jpg',
        desc: 'Beach ceremony setup with sunset vibes and a stunning coastal ambience.'
      },
      palace: {
        id: 'palace',
        name: 'Heritage Palace Venue',
        city: 'Jaipur',
        rating: '5.0',
        type: 'Palace Venue',
        pax: '100-900 pax',
        address: 'Heritage Palace Venue, Amer Road, Jaipur, Rajasthan',
        phone: '+91 90000 10005',
        image: 'images/sem6matrimonialimg.png',
        desc: 'Royal palace venue for grand weddings with heritage architecture and premium services.'
      },
      rooftop: {
        id: 'rooftop',
        name: 'Skyline Rooftop Banquet',
        city: 'Bengaluru',
        rating: '4.8',
        type: 'Rooftop Venue',
        address: 'Skyline Rooftop Banquet, MG Road, Bengaluru, Karnataka',
        phone: '+91 90000 10006',
        image: 'images/littleheart5.jpg',
        desc: 'Open rooftop with city lights and premium dining.'
      },
      temple: {
        id: 'temple',
        name: 'Temple Wedding Hall',
        city: 'Chennai',
        rating: '4.7',
        type: 'Convention Hall',
        address: 'Temple Wedding Hall, Mylapore, Chennai, Tamil Nadu',
        phone: '+91 90000 10007',
        image: 'images/littleheart4.jpg',
        desc: 'Traditional wedding hall with ample seating and decor.'
      },
      hillside: {
        id: 'hillside',
        name: 'Hillside Retreat',
        city: 'Lonavala',
        rating: '4.8',
        type: 'Resort',
        address: 'Hillside Retreat, Tungarli, Lonavala, Maharashtra',
        phone: '+91 90000 10008',
        image: 'images/littleheart2.jpg',
        desc: 'A peaceful retreat for intimate celebrations surrounded by hills and greenery.'
      },
      riverside: {
        id: 'riverside',
        name: 'Riverside Lawn',
        city: 'Rishikesh',
        rating: '4.9',
        type: 'Lawn Venue',
        address: 'Riverside Lawn, Tapovan, Rishikesh, Uttarakhand',
        phone: '+91 90000 10009',
        image: 'images/littleheart1.jpg',
        desc: 'Scenic riverside lawn for intimate premium weddings with calm vibes.'
      },
      farmhouse: {
        id: 'farmhouse',
        name: 'Hilltop Farmhouse',
        city: 'Delhi',
        rating: '4.7',
        type: 'Farmhouse Venue',
        address: 'Hilltop Farmhouse, Chhatarpur, New Delhi, Delhi',
        phone: '+91 90000 10010',
        image: 'images/littleheart2.jpg',
        desc: 'Farmhouse setup with open lawn and indoor hall for premium functions.'
      }
    };

    const BOOKING_TOKEN_AMOUNT = 499;

    function qs(name) {
      const sp = new URLSearchParams(location.search);
      return sp.get(name) || '';
    }

    function formatINR(n) {
      try { return new Intl.NumberFormat('en-IN').format(Number(n || 0)); } catch { return String(n || 0); }
    }

    function renderPill(icon, text) {
      const el = document.createElement('div');
      el.className = 'pill';
      el.innerHTML = `<i class="${icon}" aria-hidden="true"></i><span>${text}</span>`;
      return el;
    }

    function renderInfo(label, value) {
      const box = document.createElement('div');
      box.className = 'infoBox';

      const labelEl = document.createElement('div');
      labelEl.className = 'label';
      labelEl.textContent = label;

      const valueEl = document.createElement('div');
      valueEl.className = 'value';

      if (value instanceof Node) {
        valueEl.appendChild(value);
      } else {
        valueEl.textContent = (value ?? '').toString();
      }

      box.appendChild(labelEl);
      box.appendChild(valueEl);
      return box;
    }

    const id = qs('id');
    const venue = VENUES[id];

    document.getElementById('navbarLogo')?.addEventListener('click', () => (window.location.href = 'index.html'));
    document.getElementById('backBtn')?.addEventListener('click', () => history.back());
    document.getElementById('myBookingsBtn')?.addEventListener('click', () => (window.location.href = 'MyBookings.html'));
    document.getElementById('viewBookingsBtn')?.addEventListener('click', () => (window.location.href = 'MyBookings.html'));

    if (!venue) {
      document.getElementById('emptyCard').style.display = 'block';
    } else {
      document.getElementById('venueCard').style.display = 'block';
      document.getElementById('bookingCard').style.display = 'block';

      document.getElementById('venueImg').src = venue.image;
      document.getElementById('venueImg').alt = venue.name;
      document.getElementById('venueName').textContent = venue.name;
      document.getElementById('venueSub').textContent = `${venue.city} • ${venue.type}`;

      const meta = document.getElementById('venueMeta');
      meta.appendChild(renderPill('fa-solid fa-location-dot', venue.city));
      meta.appendChild(renderPill('fa-solid fa-star', venue.rating));
      meta.appendChild(renderPill('fa-solid fa-building', venue.type));

      const info = document.getElementById('venueInfo');

      info.appendChild(renderInfo('Address', venue.address || `${venue.city}`));

      const phoneText = (venue.phone || '').toString().trim();
      const phoneLink = document.createElement('a');
      phoneLink.href = phoneText ? `tel:${phoneText}` : '#';
      phoneLink.textContent = phoneText || '—';
      phoneLink.style.color = 'inherit';
      phoneLink.style.textDecoration = 'none';
      phoneLink.style.fontWeight = '900';

      info.appendChild(renderInfo('Call venue owner', phoneLink));

      document.getElementById('venueDesc').textContent = venue.desc;
      document.getElementById('bookingAmount').textContent = `₹${formatINR(BOOKING_TOKEN_AMOUNT)}`;

      const bookingDateEl = document.getElementById('bookingDate');
      if (bookingDateEl) {
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        bookingDateEl.min = `${yyyy}-${mm}-${dd}`;
      }

      document.getElementById('payBookBtn')?.addEventListener('click', async () => {
        if (!window.startBookingPayment) {
          alert('Booking payment not loaded.');
          return;
        }

        const date = (document.getElementById('bookingDate')?.value || '').toString().trim();
        if (!date) {
          alert('Please select a booking date.');
          return;
        }

        await window.startBookingPayment({
          amount: BOOKING_TOKEN_AMOUNT,
          venue,
          bookingDate: date,
          successRedirectUrl: 'MyBookings.html',
        });
      });
    }
  </script>
</body>
</html>
